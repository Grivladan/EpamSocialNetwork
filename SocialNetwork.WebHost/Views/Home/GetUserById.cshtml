@model SocialNetwork.DataAccess.Entities.ApplicationUser
@using Microsoft.AspNet.Identity

@{
    ViewBag.Title = "GetUserById";
}

<link type="text/css" rel="stylesheet" href="~/Content/PostStyles.css" />
<script src='@Url.Content("~/Scripts/jquery-3.1.1.min.js")' type="text/javascript"></script>

<hr />
<div class="container-fluid">
    <div class="row-fluid">
       <div class="col-md-4">
           <div class="row">
               <img src="@Url.Action("UserPhotos", "Profile")" id ="ProfileImg"/>
           </div>
           @Html.Partial("_Menu")
           <p id="requestNotificator" hidden>Unreaded Message</p>

           <script type="text/javascript">
            $.getJSON(
                "@Url.Action("HasWaitingRequest", "FriendRequest", new { id = User.Identity.GetUserId<int>()})",
                function(data) {
                    if (data.HasRequest == true)
                        document.getElementById("requestNotificator").hidden = false;
                });
           </script>
        </div>

        <div class="col-md-8">
            <div class="new-post pad-bottom">
                @using (Html.BeginForm())
                {
                    <div class="form-group">
                        <label for="post">Write a new post:</label>
                        <textarea class="form-control" name="Post" id="post" placeholder="New post"></textarea>
                    </div>
                    <button type="submit" class="btn btn-default">Submit</button>
                }
            </div>
            @{Html.RenderAction("GetPostsByUser", "Post", new { id = Model.Id });}
        </div>
    </div>
</div>
